<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Requests ‚Äì Global Prayer</title>

    <style>
        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: linear-gradient(135deg, #1f3c88, #2a5298);
            color: #ffffff;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 80px 24px;
        }

        h1 {
            text-align: center;
            margin-bottom: 12px;
            font-size: 2.4rem;
        }

        .subtitle {
            text-align: center;
            opacity: 0.9;
            margin-bottom: 48px;
        }

        .requests {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .request-card {
            background: rgba(255,255,255,0.12);
            border-radius: 16px;
            padding: 24px;
            backdrop-filter: blur(6px);
        }

        .request-card h3 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .request-card p {
            font-size: 0.95rem;
            opacity: 0.95;
            margin-bottom: 14px;
        }

        .request-card small {
            opacity: 0.8;
        }

        .actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 16px;
        }

        .actions a {
            color: #ffffff;
            font-weight: 600;
            text-decoration: underline;
        }

        .cta {
            text-align: center;
            margin-top: 56px;
        }

        .btn {
            padding: 14px 22px;
            border-radius: 999px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            background: #ffffff;
            color: #1f3c88;
        }

        .back {
            display: block;
            text-align: center;
            margin-top: 28px;
        }

        .back a {
            color: #ffffff;
            text-decoration: underline;
            opacity: 0.9;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üôè Prayer Requests</h1>
    <p class="subtitle">
        For <strong>{{ family_group.name }}</strong><br>
        {% if family_group.is_private %}
            <span style="font-size:0.9rem; opacity:0.85;">üîí Private group</span>
        {% else %}
            <span style="font-size:0.9rem; opacity:0.85;">üåç Public group</span>
        {% endif %}
    </p>

    {% if prayer_requests %}
        <div class="requests">
            {% for request in prayer_requests %}
                <div class="request-card">
                    <h3>{{ request.title }}</h3>

                    {% if request.is_answered %}
                        <p style="margin:6px 0 10px; font-weight:600; color:#b8ffcf;">
                            ‚úÖ Answered
                            {% if request.answered_at %}
                                ¬∑ {{ request.answered_at|date:"F j, Y" }}
                            {% endif %}
                        </p>
                    {% endif %}

                    <p>{{ request.description }}</p>
                    <small>Added on {{ request.created_at|date:"F j, Y" }}</small>

                    <div class="actions">
                        <form method="POST" action="{% url 'mark_as_prayed' request.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn" style="padding:8px 14px; font-size:0.9rem;">
                                {% if request.prayed_count == 0 %}
                                    üôè Be the first to pray
                                {% else %}
                                    üôè I prayed
                                {% endif %}
                            </button>
                        </form>
                        <form method="POST" action="{% url 'mark_as_answered' request.id %}">
                            {% csrf_token %}
                            <button type="submit"
                                    class="btn"
                                    style="padding:8px 14px; font-size:0.85rem;
                                           background:{% if request.is_answered %}rgba(255,255,255,0.85){% else %}rgba(184,255,207,0.9){% endif %};
                                           color:#1f3c88;">
                                {% if request.is_answered %}
                                    üôè Keep praying
                                {% else %}
                                    üôå God answered
                                {% endif %}
                            </button>
                        </form>
                    </div>

                    <div style="margin-top:10px; font-size:0.85rem; opacity:0.9;">
                        {% if request.is_answered %}
                            üôè This prayer was answered
                        {% elif request.prayed_count > 0 %}
                            üôè Prayed {{ request.prayed_count }} time{{ request.prayed_count|pluralize }}<br>
                            Last prayer:
                            {% if request.last_prayed_at|date:"Y-m-d" == now|date:"Y-m-d" %}
                                today
                            {% else %}
                                {{ request.last_prayed_at|date:"F j, Y" }}
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="text-align:center; opacity:0.9;">
            No prayer requests yet.
        </p>
    {% endif %}

    <div class="cta">
        <a href="{% url 'add_prayer_request' family_group.id %}" class="btn">
            + Add a Prayer Request
        </a>
    </div>

    <div class="back">
        <a href="{% url 'family_groups_list' %}">
            ‚Üê Back to Family Groups
        </a>
    </div>

    <div class="cta">
        <a href="{% url 'prayer_board_landing' %}" class="btn">
            <- back to Home
        </a>
    </div>
   
</div>

</body>
</html>